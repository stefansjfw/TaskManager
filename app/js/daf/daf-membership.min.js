/*!
* Data Aquarium Framework - Membership and Membership Manager
* Copyright 2008-2021 Code On Time LLC; Licensed MIT; http://codeontime.com/license
*/
(function(){Type.registerNamespace("Web");var i=Web.Membership=function(){Web.Membership.initializeBase(this);this._membershipBar=null;this._intervalId=null;Web.Membership._instance=this;this._displayLogin=!0;n=$app;t=n.touch},u=Web.MembershipResources,r=window,n,t;i.prototype={initialize:function(){var r=this,f=r.get_cultures(),t,i;String.isNullOrEmpty(f)||__tf!==4||(t={value:"Detect,Detect",text:u.Bar.AutoDetectLanguageOption,selected:!1},i=[t],$(f.split(/;/)).each(function(){if(this.length){var n=this.split("|"),r={value:n[0],text:n[1],selected:n[2]==="True"};i.push(r);r.selected&&(t=r)}}),n.cultureList=i);$(document).trigger($.Event("membershipinit.app",{membership:r}))},dispose:function(){},updated:function(){},get_displayRememberMe:function(){return this._displayRememberMe!==!1},set_displayRememberMe:function(n){this._displayRememberMe=n},get_rememberMeSet:function(){return this._rememberMeSet===!0},set_rememberMeSet:function(n){this._rememberMeSet=n},get_displayLogin:function(){return this._displayLogin},set_displayLogin:function(n){this._displayLogin=n},get_displayPasswordRecovery:function(){return this._displayPasswordRecovery!==!1},set_displayPasswordRecovery:function(n){this._displayPasswordRecovery=n},get_displaySignUp:function(){return this._displaySignUp!==!1},set_displaySignUp:function(n){this._displaySignUp=n},get_displayMyAccount:function(){return this._displayMyAccount},set_displayMyAccount:function(n){this._displayMyAccount=n},get_displayHelp:function(){return this._displayHelp},set_displayHelp:function(n){this._displayHelp=n},get_baseUrl:function(){return this._baseUrl||__baseUrl},set_baseUrl:function(n){this._baseUrl=n},get_servicePath:function(){return this._servicePath||__servicePath},set_servicePath:function(n){this._servicePath=n},get_welcome:function(){return String.isNullOrEmpty(this._welcome)?u.Bar.Welcome:this._welcome},set_welcome:function(n){this._welcome=n},get_user:function(){return this._user},set_user:function(n){this._user=n},get_enablePermalinks:function(){return this._enablePermalinks===!0},set_enablePermalinks:function(n){this._enablePermalinks=n},get_enableHistory:function(){return this._enableHistory===!0},set_enableHistory:function(n){this._enableHistory=n},get_isAuthenticated:function(){return this._isAuthenticated},set_isAuthenticated:function(n){this._isAuthenticated=n},get_commandLine:function(){return this._commandLine},set_commandLine:function(n){this._commandLine=n},showLoginDialog:function(){this.hideLoginDialog()},get_authenticationEnabled:function(){return this._authenticationEnabled==null||this._authenticationEnabled===!0},set_authenticationEnabled:function(n){this._authenticationEnabled=n},get_idleTimeout:function(){return this._idleTimeout==null?0:this._idleTimeout},set_idleTimeout:function(n){this._idleTimeout=n},get_cultures:function(){return this._cultures},set_cultures:function(n){this._cultures=n},get_cultureName:function(){var t=this._cultureList,n;if(t)for(n=0;n<t.length;n++)if(t[n][2]==="True")return t[n][1];return null},changeCulture:function(t){var i=new Date;i.setDate(i.getDate()+14);document.cookie=String.format(".COTCULTURE={0}; expires={1}; path=/",t,i.toUTCString());location.replace(n.unanchor(location.href))},_idle:function(){},idle:function(){var t=(new Date).getTime()-this._lastActivity>this.get_idleTimeout()&&!this._protecting&&n.loggedIn();return t&&this._idle(),t},_disposeIdentityResources:function(){this._identityModalPopup&&(this._identityModalPopup.dispose(),this._idleDialog.parentNode.removeChild(this._idleDialog),delete this._idleDialog,this._identityModalPopup=null)},_updateLastActivity:function(){this._lastActivity=new Date},loggedIn:function(){var t=n.loggedIn();return t||String.isNullOrEmpty(this.get_user())||(t=!0),t},idleInterval:function(n){var t=this;t._idleIntervalId&&(clearInterval(t._idleIntervalId),t._idleIntervalId=null);n&&t.get_idleTimeout()>0&&(t._idleIntervalId=r.setInterval(function(){t.idle()},6e4))},logout:function(){this._protecting=!1;n.logout(function(){setTimeout(function(){var r="current";n._navigated=!0;t&&((t.settings("ui.state.clear")||"never")!=="never"&&n.storage.clearUIState(),r=t.settings("membership.logoutUrl"),r==null?r=__settings.rootUrl:r!=="current"&&(r=n.resolveClientUrl(r,i._instance.get_baseUrl())));r==="current"?location.reload():location.href=r})})},helpUrl:function(){var t=r.location.pathname.split(/\//),i=this.get_baseUrl().split(/\//),u=t.slice(0,1).join("/"),n=t.slice(t.length-i.length).join("/");return n.match(/^\//)&&(n=n.substr(1)),(u||"/")+"help/"+n},help:function(){if(__settings.help){var i=this,n=i.helpUrl();t&&t.busy({progress:!0});$.ajax(n).done(function(i){n=i.match(/404 Not Found/)?__baseUrl+"help":n;t?(t.busy({progress:!1}),t.navigate({href:n})):r.open(n,"_blank")})}}};i.registerClass("Web.Membership",Sys.Component);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded()})()