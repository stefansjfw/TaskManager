/*!
* Progressive Web App - Service Worker for Touch UI
* Copyright 2022-2024 Code On Time LLC; Licensed MIT; http://codeontime.com/license
*/
function resolveClientUrl(n){var t=self.serviceWorker.scriptURL;return t=t.substring(0,t.length-9),n.replace("~/",t)}const appVersion="$AppVersion",assets=[],staticCacheName="static",userCacheName="user";self.addEventListener("install",n=>{assets.push(resolveClientUrl("~/pages/offline")),n.waitUntil(new Promise(n=>{var t=indexedDB.open("offline",1);t.onsuccess=t=>{const i=t.target.result;i.close();caches.open(userCacheName).then(t=>{t.addAll(assets).then(()=>{n()})})};t.onerror=()=>{n()}}))});self.addEventListener("fetch",n=>{var t=n.request;t.method==="GET"&&(t.mode==="navigate"?n.respondWith(new Promise((n,i)=>{caches.open(userCacheName).then(r=>{r.match(t).then(u=>{u?n(u):fetch(t).then(t=>{n(t)}).catch(t=>{r.match(resolveClientUrl("~/pages/offline")).then(r=>{r?n(r):i(t)})})})})})):t.url.match(/\.(woff2|js|css)(\?|$)/)?n.respondWith(new Promise((n,i)=>{caches.open(staticCacheName).then(r=>{r.match(t).then(u=>{u?n(u):fetch(t).then(i=>{i.status===200?r.delete(t,{ignoreSearch:!0}).then(()=>{r.put(t,i.clone()).then(()=>{n(i)})}):n(i)}).catch(n=>{i(n)})})})})):t.url.match(/\/blob(.ashx)?\?/)&&n.respondWith(new Promise(n=>{const i=indexedDB.open("offline");i.onsuccess=i=>{const r=i.target.result;if(r.objectStoreNames.contains("blob")){const i=new URL(t.url),u=r.transaction("blob").objectStore("blob").get(i.pathname+i.search.replace(/&t=.+?(&|$)/,""));u.onsuccess=i=>{var u=i.target.result;u?n(new Response(new Blob([u.data.data],{type:u.data.type}))):n(fetch(t));r.close()};u.onerror=()=>{n(fetch(t)),r.close()}}else n(fetch(t)),r.close()};i.onerror=()=>{n(fetch(t))}})))})